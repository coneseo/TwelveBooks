<!DOCTYPE html>
<html lang="es" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>12 Books</title>

    <link rel="shortcut icon" type="image/png" href="../static/images/favicon.ico"/>
    <!-- Bootstrap -->
    <!--<link rel="stylesheet" th:href="../../static/css/bootstrap.css">-->
    <link rel="stylesheet" th:href="@{/css/bootstrap.css}">
    <!--<link rel="stylesheet" th:href="../../static/css/bootstrap-grid.css">-->
    <link rel="stylesheet" th:href="@{/css/bootstrap-grid.css}">
    <!--<link rel="stylesheet" th:href="../../static/css/bootstrap-reboot.css">-->
    <link rel="stylesheet" th:href="@{/css/bootstrap-reboot.css}">

    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <script th:src="@{/js/bootstrap.bundle.js}"></script>
    <script th:src="@{/js/bootstrap.js}"></script>
    <script th:src="@{/webjars/jquery/3.3.1-2/jquery.min.js}"></script>



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
</head>
<style>
    .bgbook {
        background-image: url("../../static/images/photo-1490633874781-1c63cc424610.jpg");
        height: 900px;
        width: 100%;
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        position: relative;
        opacity: 0.7;
    }

    .text {
        width: 100%;
        background-color: white;
        opacity: 0.7;
        position: relative;
        top: 100px;

    }

    .text div {
        color: black;
    }

    .errDiv{
        font-size: 15px;
        color: darkred;
        text-decoration-color: darkred;
        text-emphasis-color: darkred;
    }

    .msg {
        display: none;
    }

    .error {
        color: #ff6666;
    }

    .success {
        color: #66cc66;
    }
</style>

<body>


<nav class="navbar navbar-expand-sm bg-white navbar-light" style="margin-top: 25px; padding-bottom: 35px;">
    <div id="mySidenav" class="sidenav" sec:authorize="hasAuthority('ROLE_USER')">

        <img th:src="@{/images/userprofile/profile-default.png}" height="200" width="200"/>
        <span style="color: whitesmoke" th:text="${#authentication.getName()}"></span>
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a th:href="@{/users/mypage}">My Page</a>
        <a th:href="@{/users/passwdchange}">Password Change</a>
        <a href="#">Library</a>
        <a href="#">Notice</a>
        <div sec:authorize="hasAuthority('ROLE_ADMIN')">
            <a th:href="@{/admin/}">Admin</a>
        </div>
        <a th:href="@{/logout}">logout</a>
    </div>
    <div sec:authorize="hasAuthority('ROLE_USER')">
        <button class="btn-menu" onclick="openNav()">
            <i class="fa fa-bars" style="margin-left: 0px;font-size:30px;"></i>
        </button>
    </div>
    <i class="fa fa-bars" style="margin-left: 25px;font-size:30px;"></i>


    <a class="navbar-brand" style="margin-left: 5px" th:href="@{/}">12 BOOKS</a>
    <!--<button class="navbar-toggler" type="button" data-toggle="collapse" daa-target="#collapsibleNavbar">-->
    <!--<span class="navbar-toggler-icon"></span>-->
    <!--</button>-->
    <div class="collapse navbar-collapse" id="collapsibleNavbar"></div>
    <i class="fa fa-search" style="margin-right: 15px"></i>

    <div style="margin-right: 25px; max-width: 150px">
        <input type="text" class="form-control" placeholder="책 검색">
    </div>

    <div sec:authorize="isAnonymous()" style="margin-right: 25px;">
        <a class="btn btn-dark" th:href="@{/users/login}"> 시작하기</a>
    </div>

    <div sec:authorize="hasAuthority('ROLE_USER')" style="margin-right: 25px;">
        <a type="button" class="btn btn-dark " th:href="@{/challenges/addform}">책 읽기</a>
    </div>

    <!--<div sec:authorize="isAnonymous()">-->
    <!--<a class="btn btn-success" th:href="@{/login}">Login</a>-->
    <!--<a class="btn btn-primary" th:href="@{/register}">Register</a>-->
    <!--</div>-->
    <!--<div sec:authorize="isAuthenticated()">-->
    <!--<a class="btn btn-success"th:href="@{/dashboard}">Dashboard</a>-->
    <!--</div>-->

</nav>

<div class="jumbotron text-center" style="margin-bottom: 25px;">
    <div class="container">
        <div class="row mgTp">
            <form class="col-md-6 offset-md-3" method="post" action="/users/join">
                <form method="post" th:action="@{/users/join}" th:object="${userJoinForm}" action="#">
                    <h3 class="title">회원가입</h3>
                    <hr class="divisor">
                    <div class="form-group" style="margin-top: 40px; margin-bottom: 20px;">
                        <input type="email" class="form-control" name="email" id="email" placeholder="이메일 주소"
                               title="이메일">
                        <span class="msg error">Not a valid email address</span>
                        <span class="msg success">A valid email address!</span>
                        <div class="errDiv" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
                    </div>
                    <div class="form-group" style="margin-top: 20px; margin-bottom: 20px;">
                        <input type="password" class="form-control" name="passwd" id="passwd" placeholder="비밀번호"
                               title="비밀번호">
                        <div class="errDiv" th:if="${#fields.hasErrors('passwd')}" th:errors="*{passwd}"></div>
                    </div>
                    <div class="form-group" style="margin-top: 20px; margin-bottom: 20px;">
                        <input type="password" class="form-control" name="passwd2" id="passwd2" placeholder="비밀번호 확인"
                               title="비밀번호 확인" onkeyup="checkPass(); return false;">
                        <div class="errDiv" th:if="${#fields.hasErrors('passwd2')}" th:errors="*{passwd2}"></div>
                        <span id="confirmMessage" class="confirmMessage"></span>
                    </div>
                    <div class="form-group" style="margin-top: 20px; margin-bottom: 20px;">
                        <input type="text" class="form-control" name="name" placeholder="이름" title="이름">
                        <div class="errDiv" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
                    </div>
                    <div class="form-group" style="margin-top: 20px; margin-bottom: 20px;">
                        <input type="text" class="form-control" name="comment" placeholder="하고싶은 한마디" title="하고싶은 한마디">
                    </div>


                    <input
                            type="hidden"
                            th:name="${_csrf.parameterName}"
                            th:value="${_csrf.token}"/>
                    <button type="submit" class="btn btn-dark topBtn"> 회원가입</button>
                </form>
            </form>
        </div>
    </div>
</div>


<footer class="jumbotron page-footer font-small blue pt-4" style="height: 150px">

    <!-- Footer Links -->
    <div class="container-fluid text-center text-md-left">

        <!-- Grid row -->
        <div class="row">

            <!-- Grid column -->
            <div class="col-md-6 mt-md-0 mt-3" style="font-size: 12px;">

                <!-- Content -->
                <h5 class="text-uppercase">12 Books</h5>
                <p>주식회사 12 Books | 서울특별시 강남구 언주로 174길 30 로빈명품관 지하1층 | 사업자등록번호 : 111-11-11111</p>
                <p>통신판매업 : 2012-서울강남-01897 | 대표: 서청원</p>
                <p>개인정보관리책임자 : 민경수(help@12books.com)</p>

            </div>
            <!-- Grid column -->


            <hr class="clearfix w-100 d-md-none pb-3">


            <!-- Grid column -->
            <!--<div class="col-md-3 mb-md-0 mb-3">-->

            <!--&lt;!&ndash; Links &ndash;&gt;-->
            <!--<h5 class="text-uppercase">Links</h5>-->

            <!--<ul class="list-unstyled">-->
            <!--<li>-->
            <!--<a href="#!">Link 1</a>-->
            <!--</li>-->
            <!--<li>-->
            <!--<a href="#!">Link 2</a>-->
            <!--</li>-->
            <!--<li>-->
            <!--<a href="#!">Link 3</a>-->
            <!--</li>-->
            <!--</ul>-->

            <!--</div>-->
            <!-- Grid column -->

            <!-- Grid column -->
            <!--<div class="col-md-3 mb-md-0 mb-3">-->

            <!--&lt;!&ndash; Links &ndash;&gt;-->
            <!--<h5 class="text-uppercase">Links</h5>-->

            <!--<ul class="list-unstyled">-->
            <!--<li>-->
            <!--<a href="#!">Link 1</a>-->
            <!--</li>-->
            <!--<li>-->
            <!--<a href="#!">Link 2</a>-->
            <!--</li>-->
            <!--<li>-->
            <!--<a href="#!">Link 3</a>-->
            <!--</li>-->
            <!--</ul>-->

            <!--</div>-->
            <!-- Grid column -->

        </div>
        <!-- Grid row -->

    </div>
    <!-- Footer Links -->

    <!--&lt;!&ndash; Copyright &ndash;&gt;-->
    <!--<div class="footer-copyright text-center py-3">© 2018 Copyright:-->
    <!--<a href="https://mdbootstrap.com/education/bootstrap/"> MDBootstrap.com</a>-->
    <!--</div>-->
    <!--&lt;!&ndash; Copyright &ndash;&gt;-->

</footer>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }


    function checkPass() {
        //Store the password field objects into variables ...
        var pass1 = document.getElementById('passwd');
        var pass2 = document.getElementById('passwd2');
        //Store the Confimation Message Object ...
        var message = document.getElementById('confirmMessage');
        //Set the colors we will be using ...
        var goodColor = "#66cc66";
        var badColor = "#ff6666";
        //Compare the values in the password field
        //and the confirmation field
        if (pass1.value == pass2.value) {
            //The passwords match.
            //Set the color to the good color and inform
            //the user that they have entered the correct password
            message.style.color = goodColor;
            message.innerHTML = "Passwords Match!"
        } else {
            //The passwords do not match.
            //Set the color to the bad color and
            //notify the user.
            message.style.color = badColor;
            message.innerHTML = "Passwords Do Not Match!"
        }
    }

    $('form input[name="email"]').blur(function () {
        var email = $(this).val();
        var re = /[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/igm;
        if (re.test(email)) {
            $('.msg').hide();
            $('.success').show();
        } else {
            $('.msg').hide();
            $('.error').show();
        }

    });

    $(document).ready(function () {

    });



</script>

</body>
</html>