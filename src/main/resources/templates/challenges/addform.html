<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout/default">
<th:block layout:fragment="css">
</th:block>
<th:block layout:fragment="script">
</th:block>

<div layout:fragment="content">
<div class="container-fluid text-center"  style="width: 75%; margin-bottom:5%;">

    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Modal Header</h4>
                </div>
                <div class="modal-body">
                    <p>Some text in the modal.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <form id="search_form" name = "search"></form>
    <div class="col">
        <input type="text" name="searchWord" placeholder="읽을 책을 검색하세요" class="booksearch">
        <button type="button" class="btn btn-dark" data-toggle="modal" data-target="#myModal">검색</button>
    </div>
    <div class="col">
        <!--<form action="/challenges/addform"  enctype="multipart/form-data" method="POST">-->
        <div class="row">
            <div class="col" style="text-align: center">
                <img  src="http://placehold.it/200x200" class="img-thumbnail">
            </div>
            <div class="col">
                <div class="row">
                    <div class="col" style="text-align:center; padding-top: 10%;">
                        <div style="padding-bottom: 10px">제목</div>
                        <div style="padding-bottom: 10px">작가</div>
                        <div style="padding-bottom: 10px">출판사</div>
                    </div>
                    <div class="col" style="text-align:left; padding-top: 10%;">
                        <div style="padding-bottom: 10px">이것이 자바다</div>
                        <div style="padding-bottom: 10px">작가</div>
                        <div style="padding-bottom: 10px">출판사</div>
                    </div>
                </div>
            </div>
        </div>

            <div class = "row" style="padding-top: 5%;">
                <div class="col">도전 날짜</div>
                <div class="col" >
                    <div class="row" style="padding-left : 15%;">
                        <input type="text" class="form-control" id="datepicker1" style="width:30%;" onchange="caldates()">
                        <i class="fas fa-arrow-right"style="padding: 10px;"></i>
                        <input type="text" class="form-control" id="datepicker2" style="width:30%;" onchange="caldates()">
                    </div>
                </div>
            </div>

            <div class = "row" style="padding-top: 5%;">
                <div class="col">도전 일수</div>
                <div class="col" >
                    <input type="text" id="days" size="6" style="text-align:center;">일
                </div>
            </div>

            <div class="row" style="padding-top: 5%;">
                <div class="col">공개여부</div>
                <div class="col">
                    <select name="visibility" class="custom-select mb-3" style="width : 30%; padding-left : 10%;">
                        <option selected value="private">비공개</option>
                        <option value="public">공개</option>
                    </select>
                </div>
            </div>
            <div class="col" style="padding-top: 5%; padding-left: 70%;" >
            <input type="hidden"
                    th:name="${_csrf.parameterName}"
                    th:value="${_csrf.token}" />
            <input type="submit" value="도전 시작" class="btn btn-dark">
            </div>
    </div>
</div>
    <script>
        var picker = new Pikaday({
            field: document.getElementById('datepicker1'),
            format: 'yy/mm/dd',
            toString(date, format) {
                // you should do formatting based on the passed format,
                // but we will just return 'D/M/YYYY' for simplicity
                const day = date.getDate();
                const month = date.getMonth() + 1;
                const year = date.getFullYear();
                return `${year}/${month}/${day}`;
            },
            parse(dateString, format) {
                // dateString is the result of `toString` method
                const parts = dateString.split('/');
                const day = parseInt(parts[0], 10);
                const month = parseInt(parts[1], 10) - 1;
                const year = parseInt(parts[2], 10);
                return new Date(year, month, day);
            }
        });

        var picker = new Pikaday({
            field: document.getElementById('datepicker2'),
            format: 'yy/mm/dd',
            toString(date, format) {
                // you should do formatting based on the passed format,
                // but we will just return 'D/M/YYYY' for simplicity
                const day = date.getDate();
                const month = date.getMonth() + 1;
                const year = date.getFullYear();
                return `${year}/${month}/${day}`;
            },
            parse(dateString, format) {
                // dateString is the result of `toString` method
                const parts = dateString.split('/');
                const day = parseInt(parts[0], 10);
                const month = parseInt(parts[1], 10) - 1;
                const year = parseInt(parts[2], 10);
                return new Date(year, month, day);
            }
        });
    </script>

    <script>
        function caldates(){
            var sdd = document.getElementById("datepicker1").value;
            var edd = document.getElementById("datepicker2").value;
            var arr1 = sdd.split('/');
            var arr2 = edd.split('/');
            var da1 = new Date(arr1[0], arr1[1], arr1[2]);
            var da2 = new Date(arr2[0], arr2[1], arr2[2]);
            var diff = da2 - da1;
            var cDay = 24 * 60 * 60 * 1000;// 시 * 분 * 초 * 밀리세컨
            if(sdd && edd){
                document.getElementById('days').value = parseInt((diff/cDay) + 1)
            }
        }
    </script>
</div>
</html>